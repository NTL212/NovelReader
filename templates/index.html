<!DOCTYPE html>
<html lang="vi" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sho Reader - Literary Experience</title>
    <meta name="description"
        content="Sho Reader - Ứng dụng đọc Light Novel tiếng Việt với giao diện hiện đại và trải nghiệm đọc tuyệt vời.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            /* Light Theme (Default) */
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --border-color: #e5e7eb;
            --accent: #10b981;
            --accent-glow: rgba(16, 185, 129, 0.15);
        }

        /* Sepia Theme */
        html[data-theme="sepia"],
        html[data-theme="sepia"] body {
            --bg-primary: #f4ecd8 !important;
            --bg-secondary: #eaddcf !important;
            --text-primary: #433422 !important;
            --text-secondary: #5b4636 !important;
            --border-color: #d7c9b1 !important;
        }

        /* Dark Theme */
        html[data-theme="dark"],
        html[data-theme="dark"] body {
            --bg-primary: #18181b !important;
            --bg-secondary: #27272a !important;
            --text-primary: #f4f4f5 !important;
            --text-secondary: #a1a1aa !important;
            --border-color: #3f3f46 !important;
        }

        /* AMOLED Theme - MUST come after Dark to override */
        html[data-theme="amoled"],
        html[data-theme="amoled"] body {
            --bg-primary: #000000 !important;
            --bg-secondary: #0a0a0a !important;
            --text-primary: #e5e5e5 !important;
            --text-secondary: #a3a3a3 !important;
            --border-color: #262626 !important;
        }

        /* Apply variables to body and main areas */
        body {
            background-color: var(--bg-primary) !important;
            color: var(--text-primary) !important;
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Theme utility classes */
        .theme-bg-primary {
            background-color: var(--bg-primary) !important;
        }

        .theme-bg-secondary {
            background-color: var(--bg-secondary) !important;
        }

        .theme-border {
            border-color: var(--border-color) !important;
        }

        .theme-text-primary {
            color: var(--text-primary) !important;
        }

        .theme-text-secondary {
            color: var(--text-secondary) !important;
        }

        .serif {
            font-family: 'Crimson Pro', serif;
        }

        .reader-mode {
            max-width: 720px;
            margin: 0 auto;
            line-height: 1.9;
            font-size: 1.2rem;
            letter-spacing: 0.01em;
        }

        .bg-sepia {
            background-color: var(--reader-bg-light);
            color: var(--reader-text-light);
        }

        .dark .bg-reader-dark {
            background-color: var(--reader-bg-dark);
            color: var(--reader-text-dark);
        }

        /* Focus visible for keyboard navigation */
        *:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        /* Smooth transitions */
        .transition-smooth {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Premium card effects */
        .novel-card {
            background: linear-gradient(145deg,
                    rgba(39, 39, 42, 0.8) 0%,
                    rgba(24, 24, 27, 0.9) 100%);
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.2),
                0 2px 4px -2px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .light .novel-card {
            background: linear-gradient(145deg,
                    rgba(255, 255, 255, 0.95) 0%,
                    rgba(249, 250, 251, 0.9) 100%);
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.08),
                0 2px 4px -2px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .novel-card:hover {
            transform: translateY(-4px);
            box-shadow:
                0 20px 25px -5px rgba(0, 0, 0, 0.25),
                0 8px 10px -6px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(16, 185, 129, 0.3);
        }

        /* Floating navbar */
        .floating-nav {
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
        }

        /* Skeleton loading animation */
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        .skeleton {
            background: linear-gradient(90deg,
                    rgba(39, 39, 42, 0.6) 25%,
                    rgba(63, 63, 70, 0.8) 50%,
                    rgba(39, 39, 42, 0.6) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        .light .skeleton {
            background: linear-gradient(90deg,
                    rgba(229, 231, 235, 0.8) 25%,
                    rgba(243, 244, 246, 1) 50%,
                    rgba(229, 231, 235, 0.8) 75%);
            background-size: 200% 100%;
        }

        /* Button hover glow */
        .btn-primary {
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent, rgba(16, 185, 129, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .btn-primary:hover::before {
            opacity: 1;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        accent: '#10b981',
                    }
                }
            }
        }
    </script>
</head>

<body class="transition-smooth min-h-screen">

    <!-- Reading Progress Bar -->
    <div id="reading-progress-container" class="fixed top-0 left-0 w-full h-1.5 theme-bg-secondary z-[60] hidden">
        <div id="reading-progress-bar"
            class="h-full bg-emerald-500 w-0 transition-all duration-100 ease-out shadow-[0_0_10px_rgba(16,185,129,0.5)]">
        </div>
    </div>

    <!-- Floating Navigation Bar -->
    <nav
        class="floating-nav fixed top-4 left-4 right-4 z-50 theme-bg-secondary rounded-2xl border theme-border px-6 py-4 shadow-lg">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-semibold tracking-tight">
                <span class="bg-gradient-to-r from-emerald-500 to-teal-400 bg-clip-text text-transparent">Sho
                    Reader</span>
            </h1>
            <div class="flex items-center gap-3">
                <button id="toggle-dark"
                    class="p-2.5 rounded-xl theme-bg-secondary hover:bg-emerald-500/20 transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500"
                    aria-label="Chuyển đổi chế độ sáng/tối">
                    <svg id="moon-icon" class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                        </path>
                    </svg>
                    <svg id="sun-icon" class="w-5 h-5 text-gray-600 dark:text-gray-300 hidden" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                </button>
                <button id="library-btn"
                    class="px-4 py-2 text-sm font-medium rounded-xl theme-bg-secondary hover:bg-emerald-500 hover:text-white transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500">
                    Thư viện
                </button>
            </div>
        </div>
    </nav>

    <!-- App Container - with top padding for floating nav -->
    <main class="max-w-6xl mx-auto px-6 pt-28 pb-10 min-h-screen">

        <!-- Library View -->
        <section id="library-view">
            <!-- Loading Skeletons -->
            <div id="library-skeleton" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
                <div class="skeleton aspect-[2/3] rounded-2xl"></div>
                <div class="skeleton aspect-[2/3] rounded-2xl"></div>
                <div class="skeleton aspect-[2/3] rounded-2xl"></div>
                <div class="skeleton aspect-[2/3] rounded-2xl"></div>
                <div class="skeleton aspect-[2/3] rounded-2xl hidden md:block"></div>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden flex-col items-center justify-center py-20 text-center">
                <div class="w-24 h-24 mb-6 rounded-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center">
                    <svg class="w-12 h-12 text-gray-400 dark:text-zinc-500" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                        </path>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-700 dark:text-gray-200 mb-2">Thư viện trống</h3>
                <p class="text-gray-500 dark:text-zinc-400 max-w-sm">Chưa có truyện nào trong thư viện. Hãy thêm Light
                    Novel để bắt đầu đọc.</p>
            </div>

            <!-- Novel Grid -->
            <div id="novel-grid" class="hidden grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
                <!-- Novels will be injected here -->
            </div>
        </section>

        <!-- Chapter List View (Hidden by default) -->
        <section id="chapter-view" class="hidden">
            <button id="back-to-lib"
                class="mb-8 flex items-center gap-2 text-sm font-medium text-gray-500 dark:text-zinc-400 hover:text-emerald-500 transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500 rounded-lg px-2 py-1 -ml-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                Trở về thư viện
            </button>
            <h2 id="novel-title"
                class="text-3xl font-bold mb-8 bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400 bg-clip-text text-transparent">
                Tên truyện</h2>
            <div id="chapter-list" class="grid gap-3">
                <!-- Chapters will be injected here -->
            </div>
        </section>

        <!-- Reader View (Hidden by default) -->
        <section id="reader-view" class="hidden">
            <div class="flex justify-between items-center mb-10 border-b theme-border pb-4">
                <button id="back-to-chapters"
                    class="text-sm font-medium theme-text-secondary hover:text-emerald-500 transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500 rounded-lg px-2 py-1 -ml-2">
                    ← Danh sách chương
                </button>
                <div class="flex gap-2 items-center relative">
                    <!-- Settings Toggle -->
                    <button id="reader-settings-btn"
                        class="p-2 rounded-lg theme-bg-secondary hover:bg-emerald-500 hover:text-white transition-smooth focus:ring-2 focus:ring-emerald-500"
                        aria-label="Cài đặt giao diện">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                    </button>

                    <!-- Settings Modal -->
                    <div id="settings-panel"
                        class="hidden absolute top-12 right-0 w-64 p-4 rounded-xl shadow-xl border theme-bg-secondary theme-border z-50 backdrop-blur-md">
                        <h3 class="text-xs font-bold uppercase tracking-wider mb-3 theme-text-secondary">Chế độ đọc</h3>
                        <div class="grid grid-cols-2 gap-2 mb-4">
                            <button onclick="setTheme('light')"
                                class="flex items-center gap-2 p-2 rounded-lg border hover:border-emerald-500 transition-all bg-white text-gray-900 border-gray-200">
                                <div class="w-4 h-4 rounded-full border border-gray-300 bg-white"></div> Sáng
                            </button>
                            <button onclick="setTheme('sepia')"
                                class="flex items-center gap-2 p-2 rounded-lg border hover:border-emerald-500 transition-all bg-[#f4ecd8] text-[#433422] border-[#d7c9b1]">
                                <div class="w-4 h-4 rounded-full bg-[#f4ecd8] border border-[#d7c9b1]"></div> Sepia
                            </button>
                            <button onclick="setTheme('dark')"
                                class="flex items-center gap-2 p-2 rounded-lg border hover:border-emerald-500 transition-all bg-[#18181b] text-white border-[#27272a]">
                                <div class="w-4 h-4 rounded-full bg-[#27272a] border border-gray-600"></div> Tối
                            </button>
                            <button onclick="setTheme('amoled')"
                                class="flex items-center gap-2 p-2 rounded-lg border hover:border-emerald-500 transition-all bg-black text-gray-300 border-gray-800">
                                <div class="w-4 h-4 rounded-full bg-black border border-gray-700"></div> AMOLED
                            </button>
                        </div>

                        <h3 class="text-xs font-bold uppercase tracking-wider mb-3 theme-text-secondary">Cỡ chữ</h3>
                        <div class="flex gap-2">
                            <button onclick="changeFontSize(-1)"
                                class="flex-1 px-3 py-1.5 text-sm font-medium rounded-lg border theme-border hover:border-emerald-500 bg-white/5 transition-smooth"
                                aria-label="Giảm cỡ chữ">
                                A-
                            </button>
                            <button onclick="changeFontSize(1)"
                                class="flex-1 px-3 py-1.5 text-sm font-medium rounded-lg border theme-border hover:border-emerald-500 bg-white/5 transition-smooth"
                                aria-label="Tăng cỡ chữ">
                                A+
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <article id="reader-content" class="serif reader-mode whitespace-pre-wrap leading-relaxed">
                <!-- Content will be injected here -->
            </article>
            <div class="mt-20 flex justify-between gap-4">
                <button id="prev-chap"
                    class="btn-primary flex-1 p-4 theme-bg-secondary rounded-xl font-medium hover:bg-emerald-500 hover:text-white transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500">
                    ← Chương trước
                </button>
                <button id="next-chap"
                    class="btn-primary flex-1 p-4 theme-bg-secondary rounded-xl font-medium hover:bg-emerald-500 hover:text-white transition-smooth cursor-pointer focus:ring-2 focus:ring-emerald-500">
                    Chương sau →
                </button>
            </div>
        </section>

    </main>

    <footer class="py-10 text-center text-sm theme-text-secondary border-t theme-border mt-10">
        <p class="mb-2">Sho Reader - Crafted for Thành Lợi</p>
        <p class="text-xs opacity-60">Built with ♥ for the best reading experience</p>
    </footer>

    <script src="/static/js/main.js"></script>
</body>

</html>